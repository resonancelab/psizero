{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "API Documentation Schema",
  "type": "object",
  "properties": {
    "service": {
      "type": "object",
      "properties": {
        "name": {"type": "string"},
        "description": {"type": "string"},
        "version": {"type": "string"},
        "baseUrl": {"type": "string"},
        "tags": {"type": "array", "items": {"type": "string"}}
      },
      "required": ["name", "description", "version"]
    },
    "authentication": {
      "type": "object",
      "properties": {
        "required": {"type": "boolean"},
        "methods": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["ApiKeyAuth", "BearerAuth", "OAuth2"]
          }
        }
      }
    },
    "endpoints": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "path": {"type": "string"},
          "method": {
            "type": "string",
            "enum": ["GET", "POST", "PUT", "PATCH", "DELETE"]
          },
          "summary": {"type": "string"},
          "description": {"type": "string"},
          "operationId": {"type": "string"},
          "parameters": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {"type": "string"},
                "in": {
                  "type": "string",
                  "enum": ["query", "path", "header", "body"]
                },
                "required": {"type": "boolean"},
                "type": {"type": "string"},
                "description": {"type": "string"},
                "example": {},
                "schema": {"type": "object"}
              },
              "required": ["name", "in", "type"]
            }
          },
          "requestBody": {
            "type": "object",
            "properties": {
              "required": {"type": "boolean"},
              "contentType": {"type": "string"},
              "schema": {"type": "object"},
              "example": {}
            }
          },
          "responses": {
            "type": "object",
            "patternProperties": {
              "^[0-9]{3}$": {
                "type": "object",
                "properties": {
                  "description": {"type": "string"},
                  "schema": {"type": "object"},
                  "example": {}
                }
              }
            }
          },
          "errorCodes": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "code": {"type": "string"},
                "message": {"type": "string"},
                "description": {"type": "string"}
              }
            }
          }
        },
        "required": ["path", "method", "summary", "responses"]
      }
    },
    "types": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "type": {"type": "string"},
          "properties": {"type": "object"},
          "required": {"type": "array", "items": {"type": "string"}},
          "description": {"type": "string"}
        }
      }
    }
  },
  "required": ["service", "endpoints"]
}